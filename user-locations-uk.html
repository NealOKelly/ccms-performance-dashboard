<!DOCTYPE html>
<html lang="en" class="govuk-template ">
<head>
<meta charset="utf-8" />
<title>LAA - CCMS Performance Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#0b0c0c" />
<link rel="shortcut icon" sizes="16x16 32x32 48x48" href="assets/images/favicon.ico" type="image/x-icon" />
<link rel="mask-icon" href="assets/images/govuk-mask-icon.svg" color="#0b0c0c">
<link rel="apple-touch-icon" sizes="180x180" href="assets/images/govuk-apple-touch-icon-180x180.png">
<link rel="apple-touch-icon" sizes="167x167" href="assets/images/govuk-apple-touch-icon-167x167.png">
<link rel="apple-touch-icon" sizes="152x152" href="assets/images/govuk-apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" href="assets/images/govuk-apple-touch-icon.png">

<!--[if !IE 8]><!-->
<link href="assets/stylesheets/govuk-frontend-2.0.0.min.css" rel="stylesheet" />
<link href="assets/stylesheets/custom.css" rel="stylesheet" />
<!--<![endif]-->

<!--[if IE 8]>
    <link href="/govuk-frontend/all-ie8.css" rel="stylesheet" />
  <![endif]-->

<!--[if lt IE 9]>
    <script src="/html5-shiv/html5shiv.js"></script>
  <![endif]-->

<meta property="og:image" content="/assets/images/govuk-opengraph-image.png">
<!-- Get google charts loader -->
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDMp_1L62b1QUl-jQRf3hFMoWi__MpzO08"></script>
</head>

<body class="govuk-template__body ">
  <script>
    document.body.className = ((document.body.className) ? document.body.className + ' js-enabled' : 'js-enabled');

  </script> 
  <a href="#main-content" class="govuk-skip-link">Skip to main content</a>
  <header class="govuk-header " role="banner" data-module="header">
  <div class="govuk-header__container govuk-width-container">
      <div class="govuk-header__logo"> <a href="https://www.gov.uk/government/organisations/legal-aid-agency" class="govuk-header__link govuk-header__link--homepage"> <img src="assets/images/laa-logo.gif" style="height: 32px;"> </a> </div>
      <a href="/ccms-performance-dashboard" class="govuk-header__link govuk-header__link--service-name"> CCMS Performance Portal </a> </div>
  </div>
</header>
  <script>
(function(w,d,s,g,js,fs){
  g=w.gapi||(w.gapi={});g.analytics={q:[],ready:function(f){this.q.push(f);}};
  js=d.createElement(s);fs=d.getElementsByTagName(s)[0];
  js.src='https://apis.google.com/js/platform.js';
  fs.parentNode.insertBefore(js,fs);js.onload=function(){g.load('analytics');};
}(window,document,'script'));
</script> 
  <script>

gapi.analytics.ready(function() {

  /**
   * Authorize the user immediately if the user has already granted access.
   * If no access has been created, render an authorize button inside the
   * element with the ID "embed-api-auth-container".
   */
  gapi.analytics.auth.authorize({
    container: 'embed-api-auth-container',
    clientid: '765524848230-vlvvvlfefffg3en1ca9r15lfrpt8lqq3.apps.googleusercontent.com'
  });


  /**
   * Create a new ViewSelector instance to be rendered inside of an
   * element with the id "view-selector-container".
   */
  var viewSelector = new gapi.analytics.ViewSelector({
    container: 'view-selector-container'
  });

  // Render the view selector to the page.
  viewSelector.execute();


  /**
   * Create a new DataChart instance with the given query parameters
   * and Google chart options. It will be rendered inside an element
   * with the id "chart-container".
   */
  var dataChart = new gapi.analytics.googleCharts.DataChart({
    query: {
	//'ids': 'ga:186740943',
      metrics: 'ga:users',
		//metrics: 'ga:'
      dimensions: 'ga:city',
		filters: 'ga:city!=(not set)',
      'start-date': 'yesterday',
      'end-date': 'yesterday'
    },
    chart: {
      container: 'chart-container',
      
		type: 'GEO',
	  options: {
		  region: 'GB',
        width: '100%',
		legend: 'none',
		displayMode: 'markers',
		 		colorAxis: {
 			colors: ['#006435', '#006435']
 		},
      }
    }
  });


  /**
   * Render the dataChart on the page whenever a new view is selected.
   */
  viewSelector.on('change', function(ids) {
    dataChart.set({query: {ids: ids}}).execute();
  });

});
</script>
  <div class="govuk-width-container">
  <main class="govuk-main-wrapper " id="main-content" role="main">
  <a href="index.html" class="govuk-back-link">Back</a>
  <div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
  <h1 class="govuk-heading-xl">User locations</h1>
  <div class="govuk-body">
      <div id="chart-container" style="margin-bottom:50px;"></div>
      <div id="embed-api-auth-container"></div>
    </div>
  <script>
  function signOut() {
    var auth2 = gapi.auth2.getAuthInstance();
    auth2.signOut().then(function () {
      console.log('User signed out.');
    });
  }
</script>
  <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">
  <h2 class="govuk-heading-m">About the data</h2>
  <p class="govuk-body">This page displays data using the Google Analytics API.  At this stage it is only possible for users with access the to the LAA CCMS PUI Google Analytics Account to see this data.</p>
  <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">
  <h2 class="govuk-heading-m">What does it measure?</h2>
  <p class="govuk-body">The map show UK locations from which the system was accessed on the previous day.</p>
  <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">
  <h2 class="govuk-heading-m">Why does it matter?</h2>
  <p class="govuk-body"></p>
</div>
  <div class="govuk-grid-column-one-third">
  <div class="govuk-header__container"></div>
  <div style="height: 20px;"></div>
  <h2 class="govuk-heading-m">Quick links</h2>
  <ul class="govuk-list govuk-list--bullet">
  <li><a class="govuk-link" href="batch-schedule.html">Batch Schedule</a></li>  
  <li><a class="govuk-link" href="business-rules-monitor.html">Business Rules Monitor</a></li>  
  <li><a class="govuk-link" href="database-size.html">Database Size</a></li>
  <li><a class="govuk-link" href="deferred-upload.html">Deferred Upload</a></li>
  <li><a class="govuk-link" href="network-latency.html">Network Latency</a></li>
  <li><a class="govuk-link" href="network-throughput.html">Network Throughput</a></li>
  <li><a class="govuk-link" href="purging.html">Purging</a></li>
  <li><a class="govuk-link" href="user-locations-uk.html">User Locations (UK)</a></li>
  <li><a class="govuk-link" href="user-locations-world.html">User Locations (World)</a></li>
        </ul>
  <h2 class="govuk-heading-m">Other useful links</h2>
  <ul class="govuk-list govuk-list--bullet">
  <li><a class="govuk-link" href="https://portal.legalservices.gov.uk" target="_blank">LAA Online Portal</a></li>
  <li><a class="govuk-link" href="https://analytics.google.com/analytics/" target="_blank">Google Analytics</a></li>
  <li><a class="govuk-link" href="https://docs.google.com/spreadsheets/d/1gUcd_R_vnJDtSNlkrSGsvcJe-bKd8lDqJALeDAKEYpA/edit?usp=sharing" target="_blank">Google Sheets</a></li>
</ul>
  <h2 class="govuk-heading-m">Map details</h2>
  <div class="govuk-body" id="view-selector-container"></div>
  <ul class="govuk-list govuk-list--bullet">
  <li><a class="govuk-link" href="#" onclick="signOut();">Sign out</a></li>
  </div>
  </div>
  </main>
  </div>
<!--#include virtual="assets/includes/gds-footer.html" -->